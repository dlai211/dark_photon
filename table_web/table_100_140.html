<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Photon Performance Plots</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <base href="/dark_photon/">
    <style> 
    :root {
    --basic-color-1: #e5ffc0;
    --basic-color-2: #cdeaa3;
    --basic-color-3: #c0d99d;
    --basic-color-4: #cfe5f4;
    --basic-color-5: #f9deee;
    }

    .table-outer {
    width: 90%;
    margin: 24px auto;
    overflow-x: auto;      /* keep horizontal scrolling */
    overflow-y: visible;   /* allow tooltips to overflow vertically */
    border-radius: 14px;
    box-shadow: 0 4px 10px rgba(0,0,0,.08);
    border: 2px solid var(--color-2);
    background: #fff;
    }

    .table-wrap {
        overflow: visible; /* was auto before; important! */
        border: 0;         /* border now on .table-outer */
        box-shadow: none;  /* shadow now on .table-outer */
    }

    .cut-table {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
    min-width: 860px;
    color: #546A7B;
    text-align: left;
    }

    /* sticky header */
    .cut-table thead th {
    position: sticky;
    top: 0;
    z-index: 3;
    background: var(--color-0);
    color: #ffffff;
    font-weight: 700;
    letter-spacing: .3px;
    border-bottom: 2px solid var(--color-2);
    }

    /* first column sticky (variable names) */
    .cut-table tbody th {
    position: sticky;
    left: 0;
    z-index: 1;
    background: #ffffff;
    font-weight: 700;
    white-space: nowrap;
    border-right: 1px solid rgba(0,0,0,.06);
    }

    .cut-table th, .cut-table td {
    padding: 12px 14px;
    border-bottom: 1px solid rgba(0,0,0,.08);
    vertical-align: top;
    }

    .cut-table td.basic1[colspan] { text-align: center; } /* center "basic cut" cells */

    /* section header row inside tbody */
    .section-row th, .section-row td {
    background: var(--color-1);
    color: #fff;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: .4px;
    border-bottom: 2px solid var(--color-2);
    }

    /* “Basic cut” cells – pink highlight */
    .basic1, .basic2, .basic3, .basic4, .basic5 {
    background: var(--color-1);
    color: #2c470a;
    font-weight: 700;
    border-left: 1px solid #707070;
    border-right: 1px solid #707070;
    }

    .basic1 { background: var(--basic-color-1); }
    .basic2 { background: var(--basic-color-2); }
    .basic3 { background: var(--basic-color-3); }
    .basic4 { background: var(--basic-color-4); }
    .basic5 { background: var(--basic-color-5); }


    /* Tooltip on variable names */
    .var {
    position: relative;
    cursor: help;
    border-bottom: 1px dashed rgba(0,0,0,.25);
    }
    .var[data-tip]:hover::after,
    .var[data-tip]:focus::after {
    content: attr(data-tip);
    position: absolute;
    left: 0;
    top: calc(100% + 8px);
    min-width: 260px;
    max-width: 560px;
    padding: 10px 12px;
    background: #111827;
    color: #f9fafb;
    font-size: 13px;
    line-height: 1.35;
    border-radius: 10px;
    box-shadow: 0 6px 22px rgba(0,0,0,.25);
    z-index: 5;
    white-space: normal;
    }
    .var[data-tip]:hover::before,
    .var[data-tip]:focus::before {
    content: "";
    position: absolute;
    left: 12px;
    top: 100%;
    border: 7px solid transparent;
    border-bottom-color: #111827;
    }

    /* make tooltip sit above everything */
    .var[data-tip]::after,
    .var[data-tip]::before {
    z-index: 9999;
    }

    /* Optional tiny footnote text */
    .small-note {
    width: 90%;
    margin: 8px auto 0;
    color: #ffffff;
    opacity: .9;
    font-size: 13px;
    text-align: left;
    border-bottom: 1em solid transparent;
    }


    /* Disable the old CSS ::before/::after tooltips when body has this class */
    body.use-body-tooltips .var[data-tip]::after,
    body.use-body-tooltips .var[data-tip]::before { display: none !important; }

    /* Floating tooltip injected into <body> */
    #dp-tooltip {
    position: fixed;
    max-width: 560px;
    padding: 10px 12px;
    background: #111827;
    color: #f9fafb;
    font-size: 13px;
    line-height: 1.35;
    border-radius: 10px;
    box-shadow: 0 6px 22px rgba(0,0,0,.25);
    z-index: 999999;        /* above everything */
    pointer-events: none;   /* ignore mouse */
    }
    #dp-tooltip[data-hidden="true"] { display: none; }

    

    </style>
</head>
<body>
    <h1>Dark Photon Performance Plots</h1>

    <nav id="cut-nav">
        <!-- <ul>
            <li>Images per row:</li>
            <li><a href="#" id="2-btn" class="cut-btn">2</a></li>
            <li><a href="#" id="3-btn" class="cut-btn">3</a></li>
            <li><a href="#" id="4-btn" class="cut-btn">4</a></li>
        </ul> -->
    </nav>

    <!-- performance or selection plots -->
    <nav id="mode-nav">
        <ul id="mode-list"></ul>
    </nav>

    <!-- Section to display images -->
    <section>
        <h2 id="cut-title">Table for Basic + Selection Cuts ( 140 > mT > 100 GeV )</h2>
        <div class="wrapper" id="image-container">
            <!-- Images will be dynamically added here -->
        </div>
    </section>

    <!-- Cut Table Section (replaces image-modal) -->
    <section id="cut-table">

    <div class="table-outer">
        <div class="table-wrap">
            <table class="cut-table">
            <thead>
                <tr>
                <th>Cut Variables</th>
                <th>Internal&nbsp;Note</th>
                <th>brief_1</th>
                <th>2</th>
                <th>detail_3</th>
                </tr>
            </thead>
            <tbody>

                <!-- ===== Basic cut rows ===== -->
                <tr>
                <th><span class="var" data-tip="Number of photons">n_ph</span></th>
                <td class="basic1" colspan="4">= 1</td>
                </tr>

                <tr>
                <th><span class="var" data-tip="Number of baseline leptons (e/μ)">n_[lep]_baseline</span></th>
                <td class="basic1" colspan="4">= 0</td>
                </tr>

                <tr>
                <th><span class="var" data-tip="Number of central jets">n_jet_central</span></th>
                <td class="basic1" colspan="4">&le; 3</td>
                </tr>

                <tr>
                    <th><span class="var" data-tip="trigger_HLT_g50_tight_xe40_cell_xe70_pfopufit_80mTAC_L1eEM26M">trigger</span></th>
                    <td class="basic1" colspan="4">True</td>
                </tr>

                <tr>
                <th><span class="var" data-tip="Leading photon transverse momentum. Unit: GeV">ph_pt[0]</span></th>
                <td class="basic1" colspan="4">&gt; 50 GeV</td>
                </tr>

                <tr>
                <th><span class="var" data-tip="Missing transverse energy (MET). Unit: GeV">met_tst_et</span></th>
                <td class="basic1" colspan="4">&gt; 100 GeV</td>
                </tr>

                <tr>
                <th><span class="var" data-tip="Transverse mass: mT = √(2·pT·MET·(1 − cosΔφ)). Unit: GeV">mT</span></th>
                <td class="basic1" colspan="4">140 &gt; mT &gt; 100 GeV</td>
                </tr>

                <tr>
                <th><span class="var" data-tip="Vertex BDT score for γ+MET topology; higher = better PV consistency.">VertexBDTScore</span></th>
                <td class="basic1" colspan="4">&gt; 0.1</td>
                </tr>

                <!-- ===== Selection cut rows ===== -->
                <tr>
                <th>
                    <span class="var" data-tip="Missing-ET significance. Integer value.">
                    metsig
                    </span>
                </th>
                <td class="basic2">&gt; 6</td>
                <td class="basic2">&gt; 7</td>
                <td class="basic2">20 &gt; metsig &gt; 7</td>
                <td class="basic2">20 &gt; metsig &gt; 7</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Absolute value of pseudorapidity of the leading photon. abs(η) = |−ln[tan(θ/2)]|; [0] indexes the leading-pT photon.">
                    abs(ph_eta[0])
                    </span>
                </th>
                <td class="basic2">&lt; 1.75</td>
                <td class="basic2">&lt; 1.74</td>
                <td class="basic2">&lt; 1.74</td>
                <td class="basic2">&lt; 1.74</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Δφ between MET and photon term (π - photon direction): Δφ = |φ(MET) − φ(phterm)| wrapped to [0, π].">
                    dphi_met_phterm
                    </span>
                </th>
                <td class="basic2">&gt; 1.25</td>
                <td class="basic2">&gt; 1.23</td>
                <td class="basic2">&gt; 1.23</td>
                <td class="basic2">&gt; 1.23</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="MET_noJVT (Missing Transverse Energy without Jet Vertex Tagging) - MET. Units: GeV.">
                    dmet
                    </span>
                </th>
                <td class="basic2">&gt; −10 GeV</td>
                <td class="basic2">&gt; −21 GeV</td>
                <td class="basic2">41.6 &gt; dmet &gt; −21.2 GeV</td>
                <td class="basic2">41.6 &gt; dmet &gt; −21.2 GeV</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Δφ between leading jets and subleading jets: Δφ = |φ(jet1) − φ(jet2)| in [0, π].">
                    dphi_jj_central
                    </span>
                </th>
                <td class="basic2">&lt; 2.5</td>
                <td class="basic2">&lt; 2.37</td>
                <td class="basic2">&lt; 2.37</td>
                <td class="basic2">&lt; 2.37</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Δφ between MET and jet term (π - leading jet direction) vector: Δφ = |φ(MET) − φ(jeterm)| in [0, π].">
                    dphi_met_jetterm
                    </span>
                </th>
                <td class="basic2">&lt; 0.75</td>
                <td class="basic2">&lt; 0.73</td>
                <td class="basic2">&lt; 0.73</td>
                <td class="basic2">&lt; 0.73</td>
                </tr>

                <!-- ===== Selection cut 2 rows ===== -->
                <tr>
                <th>
                    <span class="var" data-tip="Balance = (MET + ph_pt[0]) / Σ pT(jet_central). If ΣpT(jets)=0, set the value to -999.">
                    balance
                    </span>
                </th>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3">&gt; 0.91</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="met_jetterm_et. Unit: GeV">
                    jetterm
                    </span>
                </th>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3">&gt; 92 GeV</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Δφ between the photon term and jet term: |φ(phterm) − φ(jeterm)| ∈ [0, π].">
                    dphi_phterm_jetterm
                    </span>
                </th>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3">3.1 &gt; Δφ &gt; 1.6</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="MET / MET significance. Unit: GeV">
                    metsigres
                    </span>
                </th>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3">&lt; 36 GeV</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Missing transverse energy without Jet Vertex Tagging. Unit: GeV">
                    met_noJVT
                    </span>
                </th>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3"></td>
                <td class="basic3">&gt; 90 GeV</td>
                </tr>

                <!-- ===== Significance ===== -->
                <tr>
                <th>
                    <span class="var" data-tip="Significance">
                    S/sqrt(B)
                    </span>
                </th>
                <td class="basic4">2.940</td>
                <td class="basic4">3.106</td>
                <td class="basic4">3.112</td>
                <td class="basic4">3.289</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Binomial Expected Z">
                    Zbi
                    </span>
                </th>
                <td class="basic4">-0.047</td>
                <td class="basic4">-0.023</td>
                <td class="basic4">-0.022</td>
                <td class="basic4">0.013</td>
                </tr>

                <tr>
                <th>
                    <span class="var" data-tip="Detailed number of events after each cut for each process">
                    Unified Cutflow
                    </span>
                </th>
                <td class="basic5">
                    <a href="https://github.com/dlai211/dark_photon/blob/main/code_jet_faking_ML/jet-faking/cutlogs_jet_faking_135_internal/cutflow_unified.csv" target="_blank">link</a>
                </td>
                <td class="basic5">
                    <a href="https://github.com/dlai211/dark_photon/blob/main/code_jet_faking_ML/jet-faking/cutlogs_jet_faking_135_brief_1/cutflow_unified.csv" target="_blank">link</a>
                </td>
                <td class="basic5">
                    <a href="https://github.com/dlai211/dark_photon/blob/main/code_jet_faking_ML/jet-faking/cutlogs_jet_faking_135_2/cutflow_unified.csv" target="_blank">link</a>
                </td>
                <td class="basic5">
                    <a href="https://github.com/dlai211/dark_photon/blob/main/code_jet_faking_ML/jet-faking/cutlogs_jet_faking_135_detail_3/cutflow_unified.csv" target="_blank">link</a>
                </td>
                </tr>


            </tbody>
            </table>
        </div>
    </div>

    <p class="small-note">
    In <em>unified cutflow</em>, there is one cut named <strong>CUT&nbsp;1 (preprocessing)</strong>. It means:
    </p>

    <ul class="small-note" style="text-align:left; margin-top:6px;">
    <li><strong>MC (CUT 1 preprocessing)</strong>:
        <ul>
        <li><code>n_ph == 1</code></li>
        <li><code>goodPV</code> (signal only)</li>
        <li><code>ph_truth_type == 2</code> (Zjets &amp; Wjets)</li>
        </ul>
    </li>
    <li><strong>Data-driven (CUT 1 preprocessing)</strong>:
        <ul>
        <li><code>n_ph_baseline == 1</code></li>
        <li><code>(ph_topoetcone40[0] - 2450.) / ph_pt[0] &gt; 0.1</code></li>
        </ul>
    </li>
    </ul>

    </section>



    <!-- Sidebar -->
    <div id="sidebar">
        <h3>Test Plots</h3>
        <ul>
            <li><a href="index.html#main" id="main-btn"><b>Selection Cut study 1:</b> Main</a></li>
            <li><a href="index.html#mt100" id="test-btn"><b>Selection Cut Study 2:</b> Add mT>100 in basic cut</a></li>
            <li><a href="index.html#dphi_diff" id="test-btn"><b>Selection Cut Study 3:</b> Switch out dphi_diff in selection cut</a></li>
            <li><a href="index.html#significance" id="test-btn"><b>Selection Cut Study 4:</b> Different Significance Study</a></li>
            <li><a href="index.html#jets_faking_photons" id="test-btn"><b>Selection Cut Study 5:</b> Jets-faking Photons</a></li>
            <li><a href="index.html#jets_faking_photons2" id="test-btn"><b>Selection Cut Study 5.5:</b> Jets-faking Photons (reduced)</a></li>
            <li><a href="index.html#jets_faking_photons3" id="test-btn"><b>Selection Cut Study 5.5.5:</b> Jets-faking Photons (new)</a></li>
            <li><a href="index.html#electrons_faking_photons" id="test-btn"><b>Selection Cut Study 6:</b> Electrons-faking Photons</a></li>
            <li><a href="common.html#2d" id="test-btn">2D plots of met_ph_jet</a></li>
            <li><a href="common.html#phjet" id="test-btn">ph - jet study</a></li>
            <li><a href="common.html#absWeightBasic" id="test-btn">abs(weight) Study (basic cut)</a></li>
            <li><a href="common.html#absWeightSelection" id="test-btn">abs(weight) study (selection cut)</a></li>
            <li><a href="common.html#compare" id="test-btn">compare binomial exp z</a></li>
            <li><a href="common.html#jets_faking" id="test-btn">jets_faking Comparsion Study</a></li>
            <li><a href="table_web/table_100_140.html" id="test-btn">Table of Basic + Selection cuts (140 > mT > 100 GeV)</a></li>            
        </ul>
    </div>

    <div id="sidebar-toggle"><i class="fas fa-angle-right"></i></div>

    <!-- <footer>
        &copy; 2025 Dark Photon Project
    </footer> -->

    <script src="table_web/overtable.js"></script>
    <script src="sidebar.js"></script>
</body>
</html>
